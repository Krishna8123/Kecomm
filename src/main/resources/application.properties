# ==========================================================
# DATABASE CONFIGURATION
# ==========================================================
# These will work locally, but can be overridden by env vars later.
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/cloudcartdb?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:root123}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


# ==========================================================
# JPA / HIBERNATE SETTINGS
# ==========================================================
# "update" automatically updates tables based on entities during development.
# Switch to "validate" in production for safety.
spring.jpa.hibernate.ddl-auto=${JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=${HIBERNATE_FORMAT_SQL:true}
spring.jpa.database-platform=${JPA_DATABASE_PLATFORM:org.hibernate.dialect.MySQLDialect}

# ==========================================================
# HIKARI CONNECTION POOL CONFIGURATION
# ==========================================================
# Controls how Spring handles DB connections for performance.
spring.datasource.hikari.maximum-pool-size=${HIKARI_MAXIMUM_POOL_SIZE:5}
spring.datasource.hikari.minimum-idle=${HIKARI_MINIMUM_IDLE:2}
spring.datasource.hikari.idle-timeout=${HIKARI_IDLE_TIMEOUT:10000}
spring.datasource.hikari.connection-timeout=${HIKARI_CONNECTION_TIMEOUT:20000}
spring.datasource.hikari.max-lifetime=${HIKARI_MAX_LIFETIME:30000}

# ==========================================================
# SERVER CONFIGURATION
# ==========================================================
server.port=${SERVER_PORT:8085}
spring.application.name=CloudCart

# ==========================================================
# LOGGING CONFIGURATION
# ==========================================================
# Logs saved locally under /logs directory.
logging.level.org.springframework=${SPRING_LOG_LEVEL:INFO}
logging.level.com.cloudcart=${APP_LOG_LEVEL:DEBUG}
logging.file.name=logs/cloudcart.log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ==========================================================
# SPRING SECURITY
# ==========================================================
# These will work with form-based login (no JWT)
spring.security.user.name=${DEFAULT_ADMIN_USER:admin}
spring.security.user.password=${DEFAULT_ADMIN_PASSWORD:admin123}

# ==========================================================
# MISC SETTINGS
# ==========================================================
spring.main.allow-bean-definition-overriding=true
spring.mvc.pathmatch.matching-strategy=ant_path_matcher
